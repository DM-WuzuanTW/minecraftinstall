<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minecraft 伺服器工作台</title>
    <link href="./styles/output.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap');

        body {
            font-family: 'Noto Sans TC', 'Microsoft JhengHei', monospace;
        }
    </style>
</head>

<body class="flex items-center justify-center min-h-screen p-4">

    <div class="mc-panel w-full max-w-4xl">
        <div class="mc-titlebar">
            <div class="flex items-center gap-3">
                <div class="w-8 h-8 bg-[#8b6f47] border-2 border-[#3a2817]" style="
                    background-image: repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,0,0,0.1) 2px, rgba(0,0,0,0.1) 4px),
                                      repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(0,0,0,0.1) 2px, rgba(0,0,0,0.1) 4px);
                "></div>
                <span class="text-xl font-bold text-white uppercase tracking-wide"
                    style="text-shadow: 3px 3px 0 rgba(0,0,0,0.8);">
                    伺服器工作台
                </span>
            </div>
            <div class="text-xs text-[#ffeb3b] font-bold">v2.0.0</div>
        </div>

        <div class="p-6 max-h-[600px] overflow-y-auto mc-scrollbar">
            <div class="mb-6">
                <div class="mc-card">
                    <h2 class="text-lg font-bold text-[#ffeb3b] mb-2 uppercase tracking-wide"
                        style="text-shadow: 2px 2px 0 rgba(0,0,0,0.8);">
                        歡迎使用！
                    </h2>
                    <p class="text-sm text-[#ddd] mb-2">這是一個簡單易用的 Minecraft 伺服器安裝工具</p>
                    <p class="text-xs text-[#aaa]">只需要 3 個步驟就能架設你的伺服器！</p>
                </div>
            </div>

            <!-- Tabs -->
            <div class="flex gap-2 mb-4">
                <button id="tab-btn-basic" class="flex-1 mc-tab mc-tab-active" onclick="switchTab('basic')">
                    基本安裝
                </button>
                <button id="tab-btn-advanced" class="flex-1 mc-tab" onclick="switchTab('advanced')">
                    伺服器設定
                </button>
            </div>

            <div id="tab-basic" class="space-y-6">
                <!-- Step 1 -->
                <div class="mc-card">
                    <div class="flex items-center gap-2 mb-3">
                        <span class="text-2xl">1</span>
                        <h3 class="mc-label text-base">選擇伺服器類型</h3>
                    </div>
                    <select id="server-type" class="mc-select">
                        <option value="Vanilla">Vanilla - 官方原版 (最穩定、純淨體驗)</option>
                        <option value="Purpur">Purpur - 進階玩家 (Paper 增強版)</option>
                        <option value="Paper">Paper - 推薦新手 (高效能、支援插件)</option>
                        <option value="Fabric">Fabric - 模組玩家 (輕量模組)</option>
                        <option value="Forge">Forge - 模組玩家 (大型模組)</option>
                    </select>
                    <p class="text-xs text-[#aaa] mt-2">提示: 不確定選哪個？新手建議選 Paper</p>
                </div>

                <!-- Step 2 -->
                <div class="mc-card">
                    <div class="flex items-center gap-2 mb-3">
                        <span class="text-2xl">2</span>
                        <h3 class="mc-label text-base">選擇遊戲版本</h3>
                    </div>
                    <div class="flex gap-2">
                        <input type="text" id="version-input" class="mc-input flex-1" readonly placeholder="點擊右邊按鈕選擇版本">
                        <button id="version-btn" class="mc-btn whitespace-nowrap">📋 選擇版本</button>
                    </div>
                    <p class="text-xs text-[#aaa] mt-2">💡 建議選擇最新穩定版本</p>
                </div>

                <!-- Step 3 -->
                <div class="mc-card">
                    <div class="flex items-center gap-2 mb-3">
                        <span class="text-2xl">3</span>
                        <h3 class="mc-label text-base">選擇安裝位置</h3>
                    </div>
                    <div class="flex gap-2">
                        <input type="text" id="install-path" class="mc-input flex-1" placeholder="點擊右邊按鈕選擇資料夾">
                        <button id="path-btn" class="mc-btn whitespace-nowrap">📁 瀏覽</button>
                    </div>
                    <p class="text-xs text-[#aaa] mt-2">💡 選擇一個空的資料夾</p>
                </div>

                <div class="mc-card">
                    <label class="flex items-center gap-2 cursor-pointer group">
                        <input type="checkbox" id="accept-eula" checked class="mc-checkbox">
                        <span class="text-sm text-white group-hover:text-[#ffeb3b]">我同意 Minecraft EULA 使用條款
                            (必須勾選)</span>
                    </label>
                </div>
            </div>

            <div id="tab-advanced" class="space-y-6 hidden">
                <div class="mc-card">
                    <h3 class="mc-label mb-3">啟動設定</h3>
                    <div class="space-y-4">
                        <label class="flex items-center gap-2 cursor-pointer group">
                            <input type="checkbox" id="enable-gui" class="mc-checkbox">
                            <span class="text-sm text-white group-hover:text-[#ffeb3b]">啟用伺服器圖形介面 (GUI)</span>
                        </label>

                        <div>
                            <label class="mc-label">記憶體配置</label>
                            <div class="flex items-center gap-3">
                                <input type="range" id="memory-slider" min="1024" max="16384" step="512" value="4096"
                                    class="flex-1 h-2 bg-[#2a2a2a] rounded cursor-pointer">
                                <div class="flex items-center gap-2">
                                    <input type="number" id="memory-input" min="1024" max="16384" value="4096"
                                        class="mc-input w-20 text-center">
                                    <span class="text-sm text-white font-bold">MB</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mc-card">
                    <h3 class="mc-label mb-3">遊戲規則設定</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="mc-label text-xs">遊戲模式</label>
                            <select id="prop-gamemode" class="mc-select text-sm">
                                <option value="survival">生存 (Survival)</option>
                                <option value="creative">創造 (Creative)</option>
                                <option value="adventure">冒險 (Adventure)</option>
                                <option value="spectator">旁觀 (Spectator)</option>
                            </select>
                        </div>
                        <div>
                            <label class="mc-label text-xs">遊戲難度</label>
                            <select id="prop-difficulty" class="mc-select text-sm">
                                <option value="easy">簡單 (Easy)</option>
                                <option value="normal" selected>普通 (Normal)</option>
                                <option value="hard">困難 (Hard)</option>
                                <option value="peaceful">和平 (Peaceful)</option>
                            </select>
                        </div>
                        <div>
                            <label class="mc-label text-xs">PVP 傷害</label>
                            <select id="prop-pvp" class="mc-select text-sm">
                                <option value="true">開啟 (True)</option>
                                <option value="false">關閉 (False)</option>
                            </select>
                        </div>
                        <div>
                            <label class="mc-label text-xs">允許飛行</label>
                            <select id="prop-flight" class="mc-select text-sm">
                                <option value="false">禁止 (False)</option>
                                <option value="true">允許 (True)</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="mc-card">
                    <h3 class="mc-label mb-3">連線設定</h3>
                    <div class="space-y-3">
                        <div class="grid grid-cols-2 gap-3">
                            <div>
                                <label class="mc-label text-xs">伺服器端口</label>
                                <input type="number" id="prop-port" value="25565" class="mc-input">
                            </div>
                            <div>
                                <label class="mc-label text-xs">最大玩家數</label>
                                <input type="number" id="prop-maxplayers" value="20" class="mc-input">
                            </div>
                        </div>

                        <div>
                            <label class="mc-label text-xs">伺服器標題 (MOTD)</label>
                            <input type="text" id="prop-motd" value="一個全新的 Minecraft 伺服器" class="mc-input">
                        </div>

                        <div>
                            <label class="mc-label text-xs">正版驗證 (Online Mode)</label>
                            <select id="prop-online" class="mc-select">
                                <option value="true">開啟 (只有正版玩家可以進入)</option>
                                <option value="false">關閉 (盜版玩家也可以進入)</option>
                            </select>
                            <p class="text-xs text-[#aaa] mt-1">* 關閉驗證可讓非正版玩家進入，但較不安全</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="progress-section" class="mc-card hidden">
                <h3 class="mc-label mb-3">安裝進度</h3>
                <div class="space-y-2">
                    <div class="flex justify-between text-sm">
                        <span id="progress-text" class="text-white">準備中...</span>
                        <span id="progress-percent" class="text-[#ffeb3b] font-bold">0%</span>
                    </div>
                    <div class="mc-progress">
                        <div id="progress-fill" class="mc-progress-fill" style="width: 0%"></div>
                    </div>
                </div>
            </div>

            <div class="flex gap-3 justify-end pt-4">
                <button id="reset-btn" class="mc-btn px-6">
                    重置設定
                </button>
                <button id="install-btn" class="mc-btn-primary px-8 py-3 text-lg font-bold">
                    開始安裝伺服器
                </button>
            </div>
        </div>
    </div>

    <div class="mc-titlebar border-t-4 border-[#3a2817] py-2">
        <div id="status-text" class="text-xs text-[#aaa]">準備就緒</div>
        <div class="flex gap-2">
            <button id="help-btn" class="mc-btn text-xs px-3 py-1">說明</button>
            <button id="update-btn" class="mc-btn text-xs px-3 py-1">檢查更新</button>
        </div>
    </div>
    </div>

    <div id="modal-overlay" class="hidden fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4">
        <div class="mc-panel max-w-md w-full max-h-[80vh] flex flex-col">
            <div class="mc-titlebar">
                <h3 class="text-lg font-bold text-white uppercase">選擇版本</h3>
                <button id="modal-close" class="mc-btn-danger px-3 py-1 text-sm">✖ 關閉</button>
            </div>
            <div id="modal-list" class="flex-1 overflow-y-auto mc-scrollbar p-2"></div>
        </div>
    </div>

    <div id="help-modal" class="hidden fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4">
        <div class="mc-panel max-w-2xl w-full max-h-[80vh] flex flex-col">
            <div class="mc-titlebar">
                <h3 class="text-lg font-bold text-white uppercase">使用說明</h3>
                <button id="help-close" class="mc-btn-danger px-3 py-1 text-sm">✖ 關閉</button>
            </div>
            <div class="p-6 overflow-y-auto mc-scrollbar">
                <div class="space-y-4 text-sm">
                    <div class="mc-card">
                        <h4 class="mc-label">什麼是伺服器類型？</h4>
                        <ul class="space-y-2 text-[#ddd]">
                            <li><strong>Paper</strong>: 最適合新手，效能好，支援插件</li>
                            <li><strong>Fabric/Forge</strong>: 想玩模組的話選這個</li>
                            <li><strong>Vanilla</strong>: 官方原版，最穩定</li>
                        </ul>
                    </div>
                    <div class="mc-card">
                        <h4 class="mc-label">記憶體要設多少？</h4>
                        <p class="text-[#ddd]">
                            - 少於 5 個玩家: 2-4 GB<br>
                            - 5-10 個玩家: 4-6 GB<br>
                            - 10+ 個玩家: 8+ GB
                        </p>
                    </div>
                    <div class="mc-card">
                        <h4 class="mc-label">需要開正版驗證嗎？</h4>
                        <p class="text-[#ddd]">
                            如果你和朋友都是正版帳號，建議開啟。<br>
                            如果有人是盜版，就關閉正版驗證。
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Custom Alert Modal -->
    <div id="custom-alert"
        class="hidden fixed inset-0 bg-black/80 z-50 flex items-center justify-center backdrop-blur-sm opacity-0 transition-opacity duration-300">
        <div class="mc-panel w-[450px] transform scale-90 transition-transform duration-300" id="alert-panel">
            <div class="mc-titlebar">
                <div class="flex items-center gap-2">
                    <span class="mc-icon bg-[url('../assets/crafting_table.png')] bg-cover"></span>
                    <span class="font-bold text-white text-lg tracking-wider" id="alert-title">提示</span>
                </div>
            </div>

            <div class="p-6">
                <p id="alert-message" class="text-white text-lg leading-relaxed whitespace-pre-wrap mb-6"></p>

                <div class="flex justify-end gap-3">
                    <button id="alert-ok-btn" class="mc-btn mc-btn-primary w-full text-lg py-3">
                        確定
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="renderer.js"></script>
</body>

</html>